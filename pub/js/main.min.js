"use strict";var URL="https://albinronnkvist.se/dt173g/projekt/webbtjanst/playerstats.php/spelare",poangligaEL=document.getElementById("poangliga"),currentPlayerEL=document.getElementById("currentplayer");document.addEventListener("DOMContentLoaded",function(){switch(window.location.pathname.split("/").pop()){case"index.html":(a=new XMLHttpRequest).onreadystatechange=function(){if(a.readyState==XMLHttpRequest.DONE)if(200==a.status)for(var e=JSON.parse(a.responseText),t=0;t<e.length;t++){var n=1+t;poangligaEL.innerHTML+="<tr><td>"+n+"</td><td>"+e[t].Fullname+"</td><td>"+e[t].Team+"</td><td>"+e[t].Goals+"</td><td>"+e[t].Assists+"</td><td>"+e[t].Points+"</td></tr>"}else 400==a.status?alert("OBS! Något gick fel, försök igen senare. (Error 400)"):alert("OBS! Något gick fel, försök igen senare. (Error: något annat än 200 returnerades)")},a.open("GET",URL,!0),a.send();break;case"create.html":document.getElementById("createplayer").addEventListener("click",function(){var e=document.getElementById("cfullname").value;e=e.replace(/[^-'\s]+/g,function(e){return e.replace(/^./,function(e){return e.toUpperCase()})});var t=document.getElementById("cteam").value,n=document.getElementById("cgoals").value,s=document.getElementById("cassists").value,a=+n+ +s;if(null==e||""==e||0==e.length)return alert("OBS! Du måste fylla i ett namn."),!1;var l={fullname:e,team:t,goals:n,assists:s,points:a},o=new XMLHttpRequest;o.open("POST",URL,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById("myModal").style.display="block",document.getElementById("modal-text").style.color="#4BB543",document.getElementById("modal-text").innerHTML+="<i class='far fa-check-circle'></i><br><br>Användare skapad!<br><br><br>",document.getElementById("close").addEventListener("click",function(){location.reload()}))},o.send(JSON.stringify(l))});break;case"edit.html":poangligaEL.addEventListener("click",function(e){if(e.target.classList.contains("deletebutton")){var t=new XMLHttpRequest;t.open("DELETE",URL+"/"+e.target.id,!0),t.send(),t.onload=function(){location.reload()}}}),(a=new XMLHttpRequest).onreadystatechange=function(){if(a.readyState==XMLHttpRequest.DONE)if(200==a.status)for(var e=JSON.parse(a.responseText),t=0;t<e.length;t++)poangligaEL.innerHTML+="<tr><td>"+e[t].Fullname+"</td><td>"+e[t].Team+"</td><td><a class='button' href='edit-player.html?playerid="+e[t].id+"' title='Redigera "+e[t].Fullname+"'><i class='far fa-edit'></i></a></td><td><a class='deletebutton' id='"+e[t].id+"' title='Radera "+e[t].Fullname+"'><i class='fas fa-trash-alt'></i></a></td></tr>";else 400==a.status?alert("OBS! Något gick fel, försök igen senare. (Error 400)"):alert("OBS! Något gick fel, försök igen senare. (Error: något annat än 200 returnerades)")},a.open("GET",URL,!0),a.send();break;case"edit-player.html":var a,i=location.search.substring(10);(a=new XMLHttpRequest).onreadystatechange=function(){if(a.readyState==XMLHttpRequest.DONE)if(200==a.status)for(var e=JSON.parse(a.responseText),t=0;t<e.length;t++){currentPlayerEL.innerHTML+=" <b>"+e[t].Fullname+"</b>",document.getElementById("ufullname").value=e[t].Fullname;var n=document.getElementById("uteam"),s=document.createElement("option");s.value=e[t].Team,s.text=e[t].Team,n.add(s,n[0]),n.selectedIndex="0",document.getElementById("ugoals").value=e[t].Goals,document.getElementById("uassists").value=e[t].Assists}else 400==a.status?alert("OBS! Något gick fel, försök igen senare. (Error 400)"):alert("OBS! Något gick fel, försök igen senare. (Error: något annat än 200 returnerades)")},a.open("GET",URL+"/"+i,!0),a.send(),document.getElementById("updateplayer").addEventListener("click",function(){var e=document.getElementById("ufullname").value;e=e.replace(/[^-'\s]+/g,function(e){return e.replace(/^./,function(e){return e.toUpperCase()})});var t=document.getElementById("uteam").value,n=document.getElementById("ugoals").value,s=document.getElementById("uassists").value,a=+n+ +s;if(null==e||""==e||0==e.length)return alert("OBS! Du måste fylla i ett namn."),!1;var l={fullname:e,team:t,goals:n,assists:s,points:a},o=new XMLHttpRequest;o.open("PUT",URL+"/"+i,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById("myModal").style.display="block",document.getElementById("modal-text").style.color="#4BB543",document.getElementById("modal-text").innerHTML+="<i class='far fa-check-circle'></i><br><br>Användare uppdaterad!<br><br><br>",document.getElementById("close").addEventListener("click",function(){location.reload()}))},o.send(JSON.stringify(l))})}});var currentYear=(new Date).getFullYear(),footerTextEL=document.getElementById("footertext");function scrollFunction(){20<document.body.scrollTop||20<document.documentElement.scrollTop?document.getElementById("to-top").style.display="block":document.getElementById("to-top").style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}footerTextEL.innerHTML+="<i class='far fa-copyright'></i> "+currentYear+" Albin Rönnkvist",document.onreadystatechange=function(){var e=document.readyState;"interactive"==e?(document.getElementById("content").style.visibility="hidden",document.getElementById("load").style.visibility="hidden",setTimeout(function(){document.getElementById("load").style.visibility="visible"},500)):"complete"==e&&setTimeout(function(){document.getElementById("interactive"),document.getElementById("load").style.visibility="hidden",document.getElementById("load").style.height="0px",document.getElementById("content").style.visibility="visible"})},window.onscroll=function(){scrollFunction()};var opencrumbs=document.getElementById("opencrumbs");function sortByGoals(){var e,t,n,s,a,l,o,i=document.getElementById("th-goals");if(e=document.getElementById("poangliga"),document.getElementById("th-assists").classList.contains("active-desc")&&document.getElementById("th-assists").classList.remove("active-desc"),i.classList.contains("active-desc"))for(i.classList.remove("active-desc"),document.getElementById("th-points").classList.add("active-desc"),n=!0;n;){for(n=!1,t=e.rows,s=1;s<t.length-1;s++)if(o=!1,a=t[s].getElementsByTagName("TD")[5],l=t[s+1].getElementsByTagName("TD")[5],Number(a.innerHTML)<Number(l.innerHTML)){o=!0;break}o&&(t[s].parentNode.insertBefore(t[s+1],t[s]),n=!0)}else if(!i.classList.contains("active-desc"))for(i.classList.add("active-desc"),document.getElementById("th-points").classList.remove("active-desc"),n=!0;n;){for(n=!1,t=e.rows,s=1;s<t.length-1;s++)if(o=!1,a=t[s].getElementsByTagName("TD")[3],l=t[s+1].getElementsByTagName("TD")[3],Number(a.innerHTML)<Number(l.innerHTML)){o=!0;break}o&&(t[s].parentNode.insertBefore(t[s+1],t[s]),n=!0)}}function sortByAssists(){var e,t,n,s,a,l,o,i=document.getElementById("th-assists");if(e=document.getElementById("poangliga"),document.getElementById("th-goals").classList.contains("active-desc")&&document.getElementById("th-goals").classList.remove("active-desc"),i.classList.contains("active-desc"))for(i.classList.remove("active-desc"),document.getElementById("th-points").classList.add("active-desc"),n=!0;n;){for(n=!1,t=e.rows,s=1;s<t.length-1;s++)if(o=!1,a=t[s].getElementsByTagName("TD")[5],l=t[s+1].getElementsByTagName("TD")[5],Number(a.innerHTML)<Number(l.innerHTML)){o=!0;break}o&&(t[s].parentNode.insertBefore(t[s+1],t[s]),n=!0)}else if(!i.classList.contains("active-desc"))for(i.classList.add("active-desc"),document.getElementById("th-points").classList.remove("active-desc"),n=!0;n;){for(n=!1,t=e.rows,s=1;s<t.length-1;s++)if(o=!1,a=t[s].getElementsByTagName("TD")[4],l=t[s+1].getElementsByTagName("TD")[4],Number(a.innerHTML)<Number(l.innerHTML)){o=!0;break}o&&(t[s].parentNode.insertBefore(t[s+1],t[s]),n=!0)}}function sortByPoints(){var e,t,n,s,a,l,o,i=document.getElementById("th-points");if(e=document.getElementById("poangliga"),document.getElementById("th-goals").classList.contains("active-desc")&&document.getElementById("th-goals").classList.remove("active-desc"),document.getElementById("th-assists").classList.contains("active-desc")&&document.getElementById("th-assists").classList.remove("active-desc"),!i.classList.contains("active-desc"))for(i.classList.add("active-desc"),n=!0;n;){for(n=!1,t=e.rows,s=1;s<t.length-1;s++)if(o=!1,a=t[s].getElementsByTagName("TD")[5],l=t[s+1].getElementsByTagName("TD")[5],Number(a.innerHTML)<Number(l.innerHTML)){o=!0;break}o&&(t[s].parentNode.insertBefore(t[s+1],t[s]),n=!0)}}void 0!==opencrumbs&&null!=opencrumbs&&opencrumbs.addEventListener("click",function(){for(var e=document.getElementsByClassName("crumbschildren"),t=0;t<e.length;t++)"0px"!=e[t].style.marginLeft?e[t].style.marginLeft="0px":e[t].style.marginLeft="-50px"});var menutoggleEl=document.getElementById("menutoggle"),mainmenuEl=document.getElementById("mainmenu");function toggle(){"none"===mainmenuEl.style.display?(mainmenuEl.style.display="block",menutoggleEl.classList.add("toggleactive")):(mainmenuEl.style.display="none",menutoggleEl.classList.remove("toggleactive"))}function displaymenu(){window.matchMedia("(min-width: 800px)").matches?mainmenuEl.style.display="block":(mainmenuEl.style.display="none",menutoggleEl.classList.remove("toggleactive"))}menutoggleEl.addEventListener("click",toggle,!1),window.matchMedia("(min-width: 800px)").matches?mainmenuEl.style.display="block":mainmenuEl.style.display="none",window.addEventListener("resize",displaymenu,!1);