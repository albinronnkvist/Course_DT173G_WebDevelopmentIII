"use strict";var URL="https://albinronnkvist.se/dt173g/projekt/webbtjanst/playerstats.php/spelare",poangligaEL=document.getElementById("poangliga"),currentPlayerEL=document.getElementById("currentplayer");document.addEventListener("DOMContentLoaded",function(){switch(window.location.pathname.split("/").pop()){case"index.html":(l=new XMLHttpRequest).onreadystatechange=function(){if(l.readyState==XMLHttpRequest.DONE)if(200==l.status)for(var e=JSON.parse(l.responseText),t=0;t<e.length;t++){var n=1+t;poangligaEL.innerHTML+="<tr><td>"+n+"</td><td>"+e[t].Fullname+"</td><td>"+e[t].Team+"</td><td>"+e[t].Goals+"</td><td>"+e[t].Assists+"</td><td>"+e[t].Points+"</td></tr>"}else 400==l.status?alert("OBS! Något gick fel, försök igen senare. (Error 400)"):alert("OBS! Något gick fel, försök igen senare. (Error: något annat än 200 returnerades)")},l.open("GET",URL,!0),l.send();break;case"create.html":document.getElementById("createplayer").addEventListener("click",function(){var e=document.getElementById("cfullname").value;e=e.replace(/[^-'\s]+/g,function(e){return e.replace(/^./,function(e){return e.toUpperCase()})});var t=document.getElementById("cteam").value,n=document.getElementById("cgoals").value,a=document.getElementById("cassists").value,l=+n+ +a;if(null==e||""==e||0==e.length)return alert("OBS! Du måste fylla i ett namn."),!1;var s={fullname:e,team:t,goals:n,assists:a,points:l},o=new XMLHttpRequest;o.open("POST",URL,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById("myModal").style.display="block",document.getElementById("modal-text").style.color="#4BB543",document.getElementById("modal-text").innerHTML+="<i class='far fa-check-circle'></i><br><br>Användare skapad!<br><br><br>",document.getElementById("close").addEventListener("click",function(){location.reload()}))},o.send(JSON.stringify(s))});break;case"edit.html":poangligaEL.addEventListener("click",function(e){if(e.target.classList.contains("deletebutton")){var t=new XMLHttpRequest;t.open("DELETE",URL+"/"+e.target.id,!0),t.send(),t.onload=function(){location.reload()}}}),(l=new XMLHttpRequest).onreadystatechange=function(){if(l.readyState==XMLHttpRequest.DONE)if(200==l.status)for(var e=JSON.parse(l.responseText),t=0;t<e.length;t++)poangligaEL.innerHTML+="<tr><td>"+e[t].Fullname+"</td><td>"+e[t].Team+"</td><td><a class='button' href='edit-player.html?playerid="+e[t].id+"' title='Redigera "+e[t].Fullname+"'><i class='far fa-edit'></i></a></td><td><a class='deletebutton' id='"+e[t].id+"' title='Radera "+e[t].Fullname+"'><i class='fas fa-trash-alt'></i></a></td></tr>";else 400==l.status?alert("OBS! Något gick fel, försök igen senare. (Error 400)"):alert("OBS! Något gick fel, försök igen senare. (Error: något annat än 200 returnerades)")},l.open("GET",URL,!0),l.send();break;case"edit-player.html":var l,d=location.search.substring(10);(l=new XMLHttpRequest).onreadystatechange=function(){if(l.readyState==XMLHttpRequest.DONE)if(200==l.status)for(var e=JSON.parse(l.responseText),t=0;t<e.length;t++){currentPlayerEL.innerHTML+=" <b>"+e[t].Fullname+"</b>",document.getElementById("ufullname").value=e[t].Fullname;var n=document.getElementById("uteam"),a=document.createElement("option");a.value=e[t].Team,a.text=e[t].Team,n.add(a,n[0]),n.selectedIndex="0",document.getElementById("ugoals").value=e[t].Goals,document.getElementById("uassists").value=e[t].Assists}else 400==l.status?alert("OBS! Något gick fel, försök igen senare. (Error 400)"):alert("OBS! Något gick fel, försök igen senare. (Error: något annat än 200 returnerades)")},l.open("GET",URL+"/"+d,!0),l.send(),document.getElementById("updateplayer").addEventListener("click",function(){var e=document.getElementById("ufullname").value;e=e.replace(/[^-'\s]+/g,function(e){return e.replace(/^./,function(e){return e.toUpperCase()})});var t=document.getElementById("uteam").value,n=document.getElementById("ugoals").value,a=document.getElementById("uassists").value,l=+n+ +a;if(null==e||""==e||0==e.length)return alert("OBS! Du måste fylla i ett namn."),!1;var s={fullname:e,team:t,goals:n,assists:a,points:l},o=new XMLHttpRequest;o.open("PUT",URL+"/"+d,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById("myModal").style.display="block",document.getElementById("modal-text").style.color="#4BB543",document.getElementById("modal-text").innerHTML+="<i class='far fa-check-circle'></i><br><br>Användare uppdaterad!<br><br><br>",document.getElementById("close").addEventListener("click",function(){location.reload()}))},o.send(JSON.stringify(s))})}});var currentYear=(new Date).getFullYear(),footerTextEL=document.getElementById("footertext");function scrollFunction(){20<document.body.scrollTop||20<document.documentElement.scrollTop?document.getElementById("to-top").style.display="block":document.getElementById("to-top").style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}footerTextEL.innerHTML+="<i class='far fa-copyright'></i> "+currentYear+" Albin Rönnkvist",document.onreadystatechange=function(){var e=document.readyState;"interactive"==e?(document.getElementById("content").style.visibility="hidden",document.getElementById("load").style.visibility="hidden",setTimeout(function(){document.getElementById("load").style.visibility="visible"},500)):"complete"==e&&setTimeout(function(){document.getElementById("interactive"),document.getElementById("load").style.visibility="hidden",document.getElementById("load").style.height="0px",document.getElementById("content").style.visibility="visible"})},window.onscroll=function(){scrollFunction()};var opencrumbs=document.getElementById("opencrumbs");void 0!==opencrumbs&&null!=opencrumbs&&opencrumbs.addEventListener("click",function(){for(var e=document.getElementsByClassName("crumbschildren"),t=0;t<e.length;t++)"0px"!=e[t].style.marginLeft?e[t].style.marginLeft="0px":e[t].style.marginLeft="-50px"});var menutoggleEl=document.getElementById("menutoggle"),mainmenuEl=document.getElementById("mainmenu");function toggle(){"none"===mainmenuEl.style.display?(mainmenuEl.style.display="block",menutoggleEl.classList.add("toggleactive")):(mainmenuEl.style.display="none",menutoggleEl.classList.remove("toggleactive"))}function displaymenu(){window.matchMedia("(min-width: 800px)").matches?mainmenuEl.style.display="block":(mainmenuEl.style.display="none",menutoggleEl.classList.remove("toggleactive"))}menutoggleEl.addEventListener("click",toggle,!1),window.matchMedia("(min-width: 800px)").matches?mainmenuEl.style.display="block":mainmenuEl.style.display="none",window.addEventListener("resize",displaymenu,!1);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnN1bWUuanMiLCJtYWluLmpzIiwibWVudS5qcyJdLCJuYW1lcyI6WyJVUkwiLCJwb2FuZ2xpZ2FFTCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjdXJyZW50UGxheWVyRUwiLCJhZGRFdmVudExpc3RlbmVyIiwid2luZG93IiwibG9jYXRpb24iLCJwYXRobmFtZSIsInNwbGl0IiwicG9wIiwieG1saHR0cCIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsIkRPTkUiLCJzdGF0dXMiLCJqc29uRGF0YSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImkiLCJsZW5ndGgiLCJudW1iZXIiLCJpbm5lckhUTUwiLCJGdWxsbmFtZSIsIlRlYW0iLCJHb2FscyIsIkFzc2lzdHMiLCJQb2ludHMiLCJhbGVydCIsIm9wZW4iLCJzZW5kIiwiY2Z1bGxuYW1lIiwidmFsdWUiLCJyZXBsYWNlIiwid29yZCIsImZpcnN0IiwidG9VcHBlckNhc2UiLCJjdGVhbSIsImNnb2FscyIsImNhc3Npc3RzIiwiY3BvaW50cyIsImpzb24iLCJmdWxsbmFtZSIsInRlYW0iLCJnb2FscyIsImFzc2lzdHMiLCJwb2ludHMiLCJzZXRSZXF1ZXN0SGVhZGVyIiwidGhpcyIsInN0eWxlIiwiZGlzcGxheSIsImNvbG9yIiwicmVsb2FkIiwic3RyaW5naWZ5IiwiZXYiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImlkIiwib25sb2FkIiwiZ2V0aWQiLCJzZWFyY2giLCJzdWJzdHJpbmciLCJ0ZWFtc0VMIiwib3B0IiwiY3JlYXRlRWxlbWVudCIsInRleHQiLCJhZGQiLCJzZWxlY3RlZEluZGV4IiwidWZ1bGxuYW1lIiwidXRlYW0iLCJ1Z29hbHMiLCJ1YXNzaXN0cyIsInVwb2ludHMiLCJjdXJyZW50WWVhciIsIkRhdGUiLCJnZXRGdWxsWWVhciIsImZvb3RlclRleHRFTCIsInNjcm9sbEZ1bmN0aW9uIiwiYm9keSIsInNjcm9sbFRvcCIsImRvY3VtZW50RWxlbWVudCIsInRvcEZ1bmN0aW9uIiwic3RhdGUiLCJ2aXNpYmlsaXR5Iiwic2V0VGltZW91dCIsImhlaWdodCIsIm9uc2Nyb2xsIiwib3BlbmNydW1icyIsImNydW1ic0xpIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm1hcmdpbkxlZnQiLCJtZW51dG9nZ2xlRWwiLCJtYWlubWVudUVsIiwidG9nZ2xlIiwicmVtb3ZlIiwiZGlzcGxheW1lbnUiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyJdLCJtYXBwaW5ncyI6IkFBS0EsYUFPQSxJQUFBQSxJQUFBLDhFQVFBQyxZQUFBQyxTQUFBQyxlQUFBLGFBR0FDLGdCQUFBRixTQUFBQyxlQUFBLGlCQVFBRCxTQUFBRyxpQkFBQSxtQkFBQSxXQU9BLE9BSkFDLE9BQUFDLFNBQUFDLFNBQ0FDLE1BQUEsS0FBQUMsT0FPQSxJQUFBLGNBSUFDLEVBQUEsSUFBQUMsZ0JBRUFDLG1CQUFBLFdBQ0EsR0FBQUYsRUFBQUcsWUFBQUYsZUFBQUcsS0FDQSxHQUFBLEtBQUFKLEVBQUFLLE9BR0EsSUFEQSxJQUFBQyxFQUFBQyxLQUFBQyxNQUFBUixFQUFBUyxjQUNBQyxFQUFBLEVBQUFBLEVBQUFKLEVBQUFLLE9BQUFELElBQUEsQ0FDQSxJQUFBRSxFQUFBLEVBQUFGLEVBQ0FwQixZQUFBdUIsV0FBQSxXQUFBRCxFQUFBLFlBQUFOLEVBQUFJLEdBQUFJLFNBQUEsWUFBQVIsRUFBQUksR0FBQUssS0FBQSxZQUFBVCxFQUFBSSxHQUFBTSxNQUFBLFlBQUFWLEVBQUFJLEdBQUFPLFFBQUEsWUFBQVgsRUFBQUksR0FBQVEsT0FBQSxrQkFHQSxLQUFBbEIsRUFBQUssT0FDQWMsTUFBQSx3REFHQUEsTUFBQSxzRkFLQW5CLEVBQUFvQixLQUFBLE1BQUEvQixLQUFBLEdBQ0FXLEVBQUFxQixPQUNBLE1BTUEsSUFBQSxjQUdBOUIsU0FBQUMsZUFBQSxnQkFBQUUsaUJBQUEsUUFBQSxXQUlBLElBQUE0QixFQUFBL0IsU0FBQUMsZUFBQSxh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REEsSUFBQUMsYUFBQTVGLFNBQUFDLGVBQUEsY0FDQTRGLFdBQUE3RixTQUFBQyxlQUFBLFlBS0EsU0FBQTZGLFNBRUEsU0FBQUQsV0FBQTVDLE1BQUFDLFNBQ0EyQyxXQUFBNUMsTUFBQUMsUUFBQSxRQUNBMEMsYUFBQXBDLFVBQUFXLElBQUEsa0JBR0EwQixXQUFBNUMsTUFBQUMsUUFBQSxPQUNBMEMsYUFBQXBDLFVBQUF1QyxPQUFBLGlCQWtCQSxTQUFBQyxjQUVBNUYsT0FBQTZGLFdBQUEsc0JBQUFDLFFBQ0FMLFdBQUE1QyxNQUFBQyxRQUFBLFNBR0EyQyxXQUFBNUMsTUFBQUMsUUFBQSxPQUNBMEMsYUFBQXBDLFVBQUF1QyxPQUFBLGlCQXRCQUgsYUFBQXpGLGlCQUFBLFFBQUEyRixRQUFBLEdBS0ExRixPQUFBNkYsV0FBQSxzQkFBQUMsUUFDQUwsV0FBQTVDLE1BQUFDLFFBQUEsUUFHQTJDLFdBQUE1QyxNQUFBQyxRQUFBLE9BZ0JBOUMsT0FBQUQsaUJBQUEsU0FBQTZGLGFBQUEiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5GaWxlOiBjb25zdW1lLmpzXHJcbkRlc2NyaXB0aW9uOiBDb25zdW1lIHdlYiBzZXJ2aWNlXHJcbkF1dGhvcjogQWxiaW4gUsO2bm5rdmlzdFxyXG4qL1xyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcblxyXG5cclxuLypcclxuTWFpbiBVUkxcclxuKi9cclxudmFyIFVSTCA9IFwiaHR0cHM6Ly9hbGJpbnJvbm5rdmlzdC5zZS9kdDE3M2cvcHJvamVrdC93ZWJidGphbnN0L3BsYXllcnN0YXRzLnBocC9zcGVsYXJlXCI7XHJcblxyXG5cclxuXHJcbi8qXHJcbkVsZW1lbnRzXHJcbiovXHJcbi8vIEdldCBlbGVtZW50IFwicG9hbmdsaWdhXCJcclxudmFyIHBvYW5nbGlnYUVMID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwb2FuZ2xpZ2FcIik7XHJcblxyXG4vLyBHZXQgZWxlbWVudCBcImN1cnJlbnRwbGF5ZXJcIlxyXG52YXIgY3VycmVudFBsYXllckVMID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjdXJyZW50cGxheWVyXCIpO1xyXG5cclxuXHJcblxyXG4vKlxyXG5BSkFYLXJlcXVlc3RzXHJcbiovXHJcbi8vIEdFVC1tZXRob2QgLSBzaG93IHBsYXllcnMgb24gRE9NIG9ubG9hZFxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpIHsgXHJcblxyXG4gIC8vIEdldCBuYW1lIG9mIGN1cnJlbnQgaHRtbC1wYWdlXHJcbiAgdmFyIHBhdGggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgdmFyIHBhZ2UgPSBwYXRoLnNwbGl0KFwiL1wiKS5wb3AoKTtcclxuXHJcbiAgLy8gRGlzcGxheSBkaWZmZXJlbnQgb3V0Y29tZSBmb3IgZGlmZmVyZW50IGh0bWwtcGFnZXNcclxuICBzd2l0Y2gocGFnZSkgeyAgXHJcblxyXG4gICAgLy9cclxuICAgIC8vIEluZGV4LXBhZ2VcclxuICAgIGNhc2UgXCJpbmRleC5odG1sXCI6XHJcblxyXG4gICAgICAgIC8vIEdldCBwbGF5ZXJzXHJcbiAgICAgICAgLy8gQUpBWC1yZXF1ZXN0LCBHRVRcclxuICAgICAgICB2YXIgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUgKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHhtbGh0dHAuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICBcclxuICAgICAgICAgICAgICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKCB4bWxodHRwLnJlc3BvbnNlVGV4dCApO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwganNvbkRhdGEubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIG51bWJlciA9IDEgKyBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgcG9hbmdsaWdhRUwuaW5uZXJIVE1MICs9IFwiPHRyPjx0ZD5cIiArIG51bWJlciArIFwiPC90ZD48dGQ+XCIgKyBqc29uRGF0YVtpXS5GdWxsbmFtZSArIFwiPC90ZD48dGQ+XCIgKyBqc29uRGF0YVtpXS5UZWFtICsgXCI8L3RkPjx0ZD5cIiArIGpzb25EYXRhW2ldLkdvYWxzICsgXCI8L3RkPjx0ZD5cIiArIGpzb25EYXRhW2ldLkFzc2lzdHMgKyBcIjwvdGQ+PHRkPlwiICsganNvbkRhdGFbaV0uUG9pbnRzICsgXCI8L3RkPjwvdHI+XCI7ICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSBpZiAoeG1saHR0cC5zdGF0dXMgPT0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIk9CUyEgTsOlZ290IGdpY2sgZmVsLCBmw7Zyc8O2ayBpZ2VuIHNlbmFyZS4gKEVycm9yIDQwMClcIik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBhbGVydChcIk9CUyEgTsOlZ290IGdpY2sgZmVsLCBmw7Zyc8O2ayBpZ2VuIHNlbmFyZS4gKEVycm9yOiBuw6Vnb3QgYW5uYXQgw6RuIDIwMCByZXR1cm5lcmFkZXMpXCIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCBVUkwsIHRydWUpO1xyXG4gICAgICAgIHhtbGh0dHAuc2VuZCgpO1xyXG4gICAgICBicmVhaztcclxuXHJcblxyXG5cclxuICAgIC8vXHJcbiAgICAvLyBDcmVhdGUtcGFnZVxyXG4gICAgY2FzZSBcImNyZWF0ZS5odG1sXCI6XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBuZXcgcGxheWVyXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjcmVhdGVwbGF5ZXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgLy8gRm9ybSBpbnB1dHNcclxuICAgICAgICAgIC8vIEZ1bGxuYW1lLCB1cHBlcmNhc2UgZmlyc3QgbGV0dGVyc1xyXG4gICAgICAgICAgdmFyIGNmdWxsbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2Z1bGxuYW1lXCIpLnZhbHVlO1xyXG4gICAgICAgICAgY2Z1bGxuYW1lID0gY2Z1bGxuYW1lLnJlcGxhY2UoL1teLSdcXHNdKy9nLCBmdW5jdGlvbih3b3JkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3b3JkLnJlcGxhY2UoL14uLywgZnVuY3Rpb24oZmlyc3QpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZmlyc3QudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAvLyBUZWFtXHJcbiAgICAgICAgICB2YXIgY3RlYW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImN0ZWFtXCIpLnZhbHVlO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBHb2Fsc1xyXG4gICAgICAgICAgdmFyIGNnb2FscyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2dvYWxzXCIpLnZhbHVlO1xyXG5cclxuICAgICAgICAgIC8vIEFzc2lzdHNcclxuICAgICAgICAgIHZhciBjYXNzaXN0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2Fzc2lzdHNcIikudmFsdWU7XHJcblxyXG4gICAgICAgICAgLy8gUG9pbnRzXHJcbiAgICAgICAgICB2YXIgY3BvaW50cyA9ICtjZ29hbHMgKyArY2Fzc2lzdHM7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAvLyBDaGVjayBpZiBmdWxsbmFtZS1pbnB1dCBpcyBlbXB0eVxyXG4gICAgICAgICAgaWYgKGNmdWxsbmFtZT09bnVsbCB8fCBjZnVsbG5hbWU9PVwiXCIgfHwgY2Z1bGxuYW1lLmxlbmd0aD09MCkge1xyXG4gICAgICAgICAgICBhbGVydChcIk9CUyEgRHUgbcOlc3RlIGZ5bGxhIGkgZXR0IG5hbW4uXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBQcmVwYXJlIGFuZCBzZW5kIHRoZSByZXF1ZXN0XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gUmVxdWVzdCBib2R5XHJcbiAgICAgICAgICAgIHZhciBqc29uID0ge1wiZnVsbG5hbWVcIjpjZnVsbG5hbWUsXCJ0ZWFtXCI6Y3RlYW0sXCJnb2Fsc1wiOmNnb2FscyxcImFzc2lzdHNcIjpjYXNzaXN0cyxcInBvaW50c1wiOmNwb2ludHN9O1xyXG5cclxuICAgICAgICAgICAgLy8gQUpBWC1yZXF1ZXN0LCBQT1NUXHJcbiAgICAgICAgICAgIHZhciB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhtbGh0dHAub3BlbihcIlBPU1RcIiwgVVJMLCB0cnVlKTtcclxuICAgICAgICAgICAgeG1saHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xyXG4gICAgICAgICAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT0gNCAmJiB0aGlzLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlNb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2RhbC10ZXh0XCIpLnN0eWxlLmNvbG9yID0gXCIjNEJCNTQzXCI7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLXRleHRcIikuaW5uZXJIVE1MICs9IFwiPGkgY2xhc3M9J2ZhciBmYS1jaGVjay1jaXJjbGUnPjwvaT48YnI+PGJyPkFudsOkbmRhcmUgc2thcGFkITxicj48YnI+PGJyPlwiO1xyXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgdXNlciBjbGlja3Mgb24gT0ssIGNsb3NlIHRoZSBtb2RhbFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHhtbGh0dHAuc2VuZChKU09OLnN0cmluZ2lmeShqc29uKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgXHJcblxyXG5cclxuICAgIC8vXHJcbiAgICAvLyBFZGl0LXBhZ2VcclxuICAgIGNhc2UgXCJlZGl0Lmh0bWxcIjpcclxuXHJcbiAgICAgICAgLy8gRGVsZXRlIHBsYXllclxyXG4gICAgICAgIHBvYW5nbGlnYUVMLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgaWYgKGV2LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkZWxldGVidXR0b25cIikpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFKQVgtcmVxdWVzdCwgREVMRVRFXHJcbiAgICAgICAgICAgIHZhciB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhtbGh0dHAub3BlbihcIkRFTEVURVwiLCBVUkwrXCIvXCIrZXYudGFyZ2V0LmlkLCB0cnVlKTtcclxuICAgICAgICAgICAgeG1saHR0cC5zZW5kKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZWxvYWQgcGFnZVxyXG4gICAgICAgICAgICB4bWxodHRwLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICAgICAvLyBHZXQgcGxheWVycyArIGVkaXQtYnV0dG9ucyBhbmQgZGVsZXRlLWJ1dHRvbnNcclxuICAgICAgICAvLyBBSkFYLXJlcXVlc3QsIEdFVFxyXG4gICAgICAgIHZhciB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gICAgICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSApIHtcclxuICAgICAgICAgICAgICBpZiAoeG1saHR0cC5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZSggeG1saHR0cC5yZXNwb25zZVRleHQgKTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwganNvbkRhdGEubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICBwb2FuZ2xpZ2FFTC5pbm5lckhUTUwgKz0gXCI8dHI+PHRkPlwiICsganNvbkRhdGFbaV0uRnVsbG5hbWUgKyBcIjwvdGQ+PHRkPlwiICsganNvbkRhdGFbaV0uVGVhbSArIFwiPC90ZD48dGQ+PGEgY2xhc3M9J2J1dHRvbicgaHJlZj0nZWRpdC1wbGF5ZXIuaHRtbD9wbGF5ZXJpZD1cIitqc29uRGF0YVtpXS5pZCtcIicgdGl0bGU9J1JlZGlnZXJhIFwiK2pzb25EYXRhW2ldLkZ1bGxuYW1lK1wiJz48aSBjbGFzcz0nZmFyIGZhLWVkaXQnPjwvaT48L2E+PC90ZD48dGQ+PGEgY2xhc3M9J2RlbGV0ZWJ1dHRvbicgaWQ9J1wiK2pzb25EYXRhW2ldLmlkK1wiJyB0aXRsZT0nUmFkZXJhIFwiK2pzb25EYXRhW2ldLkZ1bGxuYW1lK1wiJz48aSBjbGFzcz0nZmFzIGZhLXRyYXNoLWFsdCc+PC9pPjwvYT48L3RkPjwvdHI+XCI7ICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmICh4bWxodHRwLnN0YXR1cyA9PSA0MDApIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiT0JTISBOw6Vnb3QgZ2ljayBmZWwsIGbDtnJzw7ZrIGlnZW4gc2VuYXJlLiAoRXJyb3IgNDAwKVwiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiT0JTISBOw6Vnb3QgZ2ljayBmZWwsIGbDtnJzw7ZrIGlnZW4gc2VuYXJlLiAoRXJyb3I6IG7DpWdvdCBhbm5hdCDDpG4gMjAwIHJldHVybmVyYWRlcylcIik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgICAgeG1saHR0cC5vcGVuKFwiR0VUXCIsIFVSTCwgdHJ1ZSk7XHJcbiAgICAgICAgeG1saHR0cC5zZW5kKCk7XHJcbiAgICAgIGJyZWFrO1xyXG5cclxuXHJcblxyXG4gICAgLy9cclxuICAgIC8vIEVkaXQtcGxheWVyLXBhZ2VcclxuICAgIGNhc2UgXCJlZGl0LXBsYXllci5odG1sXCI6XHJcblxyXG4gICAgICAvLyBHZXQgcGxheWVyaWQgZnJvbSBVUkwobm90IHN1cHBvcnRlZCBpbiBJRSlcclxuICAgICAgLy8gdmFyIHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYXRpb24uc2VhcmNoKTtcclxuICAgICAgLy8gdmFyIGdldGlkID0gdXJsUGFyYW1zLmdldCgncGxheWVyaWQnKTtcclxuICAgICAgLy8gQmFkIHRlbXBvcmFyeSBzb2x1dGlvblxyXG4gICAgICB2YXIgZ2V0aWQgPSBsb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEwKTtcclxuXHJcblxyXG4gICAgICAvLyBHZXQgc2luZ2xlIHBsYXllclxyXG4gICAgICAvLyBBSkFYLXJlcXVlc3QsIEdFVFxyXG4gICAgICB2YXIgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSApIHtcclxuICAgICAgICAgICAgaWYgKHhtbGh0dHAuc3RhdHVzID09IDIwMCkge1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UoIHhtbGh0dHAucmVzcG9uc2VUZXh0ICk7XHJcbiAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwganNvbkRhdGEubGVuZ3RoOyBpKyspe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBOYW1lIGluIHRpdGxlXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBsYXllckVMLmlubmVySFRNTCArPSBcIiBcIiArIFwiPGI+XCIgKyBqc29uRGF0YVtpXS5GdWxsbmFtZSArIFwiPC9iPlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBGb3JtIGlucHV0c1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZ1bGxuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VmdWxsbmFtZScpLnZhbHVlID0ganNvbkRhdGFbaV0uRnVsbG5hbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRlYW1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVhbXNFTCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1dGVhbScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICBvcHQudmFsdWUgPSBqc29uRGF0YVtpXS5UZWFtO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdC50ZXh0ID0ganNvbkRhdGFbaV0uVGVhbTtcclxuICAgICAgICAgICAgICAgICAgICB0ZWFtc0VMLmFkZChvcHQsIHRlYW1zRUxbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRlYW1zRUwuc2VsZWN0ZWRJbmRleCA9IFwiMFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBHb2Fsc1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Z29hbHMnKS52YWx1ZSA9IGpzb25EYXRhW2ldLkdvYWxzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBc3Npc3RzXHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Vhc3Npc3RzJykudmFsdWUgPSBqc29uRGF0YVtpXS5Bc3Npc3RzO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoeG1saHR0cC5zdGF0dXMgPT0gNDAwKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIk9CUyEgTsOlZ290IGdpY2sgZmVsLCBmw7Zyc8O2ayBpZ2VuIHNlbmFyZS4gKEVycm9yIDQwMClcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIk9CUyEgTsOlZ290IGdpY2sgZmVsLCBmw7Zyc8O2ayBpZ2VuIHNlbmFyZS4gKEVycm9yOiBuw6Vnb3QgYW5uYXQgw6RuIDIwMCByZXR1cm5lcmFkZXMpXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCBVUkwrXCIvXCIrZ2V0aWQsIHRydWUpO1xyXG4gICAgICB4bWxodHRwLnNlbmQoKTtcclxuXHJcblxyXG5cclxuICAgICAgLy8gVXBkYXRlIHBsYXllclxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVwZGF0ZXBsYXllclwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgLy8gRm9ybSBpbnB1dHNcclxuICAgICAgICAvLyBGdWxsbmFtZSwgdXBwZXJjYXNlIGZpcnN0IGxldHRlcnNcclxuICAgICAgICB2YXIgdWZ1bGxuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1ZnVsbG5hbWVcIikudmFsdWU7XHJcbiAgICAgICAgdWZ1bGxuYW1lID0gdWZ1bGxuYW1lLnJlcGxhY2UoL1teLSdcXHNdKy9nLCBmdW5jdGlvbih3b3JkKSB7XHJcbiAgICAgICAgICByZXR1cm4gd29yZC5yZXBsYWNlKC9eLi8sIGZ1bmN0aW9uKGZpcnN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaXJzdC50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFRlYW1cclxuICAgICAgICB2YXIgdXRlYW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInV0ZWFtXCIpLnZhbHVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEdvYWxzXHJcbiAgICAgICAgdmFyIHVnb2FscyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidWdvYWxzXCIpLnZhbHVlO1xyXG5cclxuICAgICAgICAvLyBBc3Npc3RzXHJcbiAgICAgICAgdmFyIHVhc3Npc3RzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1YXNzaXN0c1wiKS52YWx1ZTtcclxuXHJcbiAgICAgICAgLy8gUG9pbnRzXHJcbiAgICAgICAgdmFyIHVwb2ludHMgPSArdWdvYWxzICsgK3Vhc3Npc3RzO1xyXG5cclxuXHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIGZ1bGxuYW1lLWlucHV0IGlzIGVtcHR5XHJcbiAgICAgICAgaWYgKHVmdWxsbmFtZT09bnVsbCB8fCB1ZnVsbG5hbWU9PVwiXCIgfHwgdWZ1bGxuYW1lLmxlbmd0aD09MCkge1xyXG4gICAgICAgICAgYWxlcnQoXCJPQlMhIER1IG3DpXN0ZSBmeWxsYSBpIGV0dCBuYW1uLlwiKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUHJlcGFyZSBhbmQgc2VuZCB0aGUgcmVxdWVzdFxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgLy8gUmVxdWVzdCBib2R5XHJcbiAgICAgICAgICB2YXIganNvbiA9IHtcImZ1bGxuYW1lXCI6dWZ1bGxuYW1lLFwidGVhbVwiOnV0ZWFtLFwiZ29hbHNcIjp1Z29hbHMsXCJhc3Npc3RzXCI6dWFzc2lzdHMsXCJwb2ludHNcIjp1cG9pbnRzfTtcclxuXHJcbiAgICAgICAgICAvLyBBSkFYLXJlcXVlc3QsIFBVVFxyXG4gICAgICAgICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgIHhtbGh0dHAub3BlbihcIlBVVFwiLCBVUkwrXCIvXCIrZ2V0aWQsIHRydWUpO1xyXG4gICAgICAgICAgeG1saHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xyXG4gICAgICAgICAgeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0ICYmIHRoaXMuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlNb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9kYWwtdGV4dFwiKS5zdHlsZS5jb2xvciA9IFwiIzRCQjU0M1wiO1xyXG4gICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9kYWwtdGV4dFwiKS5pbm5lckhUTUwgKz0gXCI8aSBjbGFzcz0nZmFyIGZhLWNoZWNrLWNpcmNsZSc+PC9pPjxicj48YnI+QW52w6RuZGFyZSB1cHBkYXRlcmFkITxicj48YnI+PGJyPlwiO1xyXG4gICAgICAgICAgICAgIC8vIFdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIE9LLCBjbG9zZSB0aGUgbW9kYWxcclxuICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsb3NlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICB4bWxodHRwLnNlbmQoSlNPTi5zdHJpbmdpZnkoanNvbikpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICBicmVhaztcclxuICB9IC8vIEVuZCBvZiBzd2l0Y2ggc3RhdGVtZW50XHJcbn0pOyAvLyBFbmQgb2YgZG9jdW1lbnQub25sb2FkLWZ1bmN0aW9uIiwiLypcclxuRmlsZTogbWFpbi5qc1xyXG5EZXNjcmlwdGlvbjogTWFpbiBqYXZhc2NyaXB0LWZpbGUgZm9yIG1pbm9yIHNjcmlwdHNcclxuQXV0aG9yOiBBbGJpbiBSw7Zubmt2aXN0XHJcbiovXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuXHJcblxyXG4vLyBEaXNwbGF5IGN1cnJlbnQgeWVhclxyXG52YXIgY3VycmVudFllYXIgPSAoKG5ldyBEYXRlKCkpLmdldEZ1bGxZZWFyKCkpO1xyXG52YXIgZm9vdGVyVGV4dEVMID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290ZXJ0ZXh0XCIpO1xyXG5mb290ZXJUZXh0RUwuaW5uZXJIVE1MICs9IFwiPGkgY2xhc3M9J2ZhciBmYS1jb3B5cmlnaHQnPjwvaT4gXCIgKyBjdXJyZW50WWVhciArIFwiIEFsYmluIFLDtm5ua3Zpc3RcIjtcclxuXHJcblxyXG5cclxuLy8gTG9hZGluZyBpY29uXHJcbmRvY3VtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzdGF0ZSA9IGRvY3VtZW50LnJlYWR5U3RhdGVcclxuICAgIGlmIChzdGF0ZSA9PSAnaW50ZXJhY3RpdmUnKSB7XHJcbiAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jykuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiO1xyXG4gICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZCcpLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIjtcclxuICAgICAgICAgLy8gIFNob3cgbG9hZGluZyBpY29uIGlmIHBhZ2UgbG9hZHMgZm9yIG1vcmUgdGhhbiA1MDAgbXNcclxuICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZCcpLnN0eWxlLnZpc2liaWxpdHk9XCJ2aXNpYmxlXCI7XHJcbiAgICAgICAgIH0sNTAwKTtcclxuICAgIH0gXHJcbiAgICBlbHNlIGlmIChzdGF0ZSA9PSAnY29tcGxldGUnKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnRlcmFjdGl2ZScpO1xyXG4gICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkJykuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiO1xyXG4gICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkJykuc3R5bGUuaGVpZ2h0PVwiMHB4XCI7XHJcbiAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKS5zdHlsZS52aXNpYmlsaXR5PVwidmlzaWJsZVwiO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuXHJcbi8vIFNjcm9sbCB0byB0b3BcclxuLy8gV2hlbiB0aGUgdXNlciBzY3JvbGxzIGRvd24gMjBweCBmcm9tIHRoZSB0b3Agb2YgdGhlIGRvY3VtZW50LCBzaG93IHRoZSBidXR0b25cclxud2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24oKSB7c2Nyb2xsRnVuY3Rpb24oKX07XHJcblxyXG5mdW5jdGlvbiBzY3JvbGxGdW5jdGlvbigpIHtcclxuICAgIGlmIChkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA+IDIwIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPiAyMCkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG8tdG9wXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG8tdG9wXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxufVxyXG5cclxuLy8gV2hlbiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIGJ1dHRvbiwgc2Nyb2xsIHRvIHRoZSB0b3Agb2YgdGhlIGRvY3VtZW50XHJcbmZ1bmN0aW9uIHRvcEZ1bmN0aW9uKCkge1xyXG4gICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSAwO1xyXG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IDA7XHJcbn1cclxuXHJcblxyXG5cclxuLy8gQnJlYWRjcnVtYnNcclxudmFyIG9wZW5jcnVtYnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9wZW5jcnVtYnNcIik7XHJcbmlmICh0eXBlb2Yob3BlbmNydW1icykgIT0gJ3VuZGVmaW5lZCcgJiYgb3BlbmNydW1icyAhPSBudWxsKSB7XHJcbiAgICBvcGVuY3J1bWJzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgY3J1bWJzTGkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY3J1bWJzY2hpbGRyZW5cIik7XHJcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGNydW1ic0xpLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmKGNydW1ic0xpW2ldLnN0eWxlLm1hcmdpbkxlZnQgIT0gXCIwcHhcIikge1xyXG4gICAgICAgICAgICAgICAgY3J1bWJzTGlbaV0uc3R5bGUubWFyZ2luTGVmdCA9IFwiMFwiICsgXCJweFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3J1bWJzTGlbaV0uc3R5bGUubWFyZ2luTGVmdCA9IFwiLTUwXCIgKyBcInB4XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSIsIi8qanNsaW50IGJyb3dzZXI6dHJ1ZSAqL1xyXG4vKlxyXG5GaWxlOiBtZW51LmpzXHJcbkRlc2NyaXB0aW9uOiBUb2dnbGUgYW5kIGRpc3BsYXkgbWVudVxyXG5BdXRob3I6IEFsYmluIFLDtm5ua3Zpc3RcclxuKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cclxuLy8gVmFyaWFibGVzXHJcbnZhciBtZW51dG9nZ2xlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lbnV0b2dnbGVcIik7XHJcbnZhciBtYWlubWVudUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWlubWVudVwiKTtcclxuXHJcblxyXG5cclxuLy8gVG9nZ2xlIG1lbnVcclxuZnVuY3Rpb24gdG9nZ2xlKCkge1xyXG5cclxuICAgIGlmIChtYWlubWVudUVsLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgbWFpbm1lbnVFbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIG1lbnV0b2dnbGVFbC5jbGFzc0xpc3QuYWRkKFwidG9nZ2xlYWN0aXZlXCIpO1xyXG4gICAgfSBcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIG1haW5tZW51RWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIG1lbnV0b2dnbGVFbC5jbGFzc0xpc3QucmVtb3ZlKFwidG9nZ2xlYWN0aXZlXCIpO1xyXG4gICAgfVxyXG59XHJcbm1lbnV0b2dnbGVFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlLCBmYWxzZSk7XHJcblxyXG5cclxuXHJcbi8vIEFsd2F5cyBkaXNwbGF5IGxpbmtzIG9uIGxhcmdlIHNjcmVlbnNcclxuaWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogODAwcHgpXCIpLm1hdGNoZXMpIHtcclxuICAgIG1haW5tZW51RWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxufSBcclxuZWxzZSB7XHJcbiAgICBtYWlubWVudUVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxufVxyXG5cclxuXHJcblxyXG4vLyBTaG93IC8gSGlkZSBtZW51IG9uIGJyb3dzZXIgcmVzaXplXHJcbmZ1bmN0aW9uIGRpc3BsYXltZW51KCkge1xyXG5cclxuICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDgwMHB4KVwiKS5tYXRjaGVzKSB7XHJcbiAgICAgICAgbWFpbm1lbnVFbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgfSBcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIG1haW5tZW51RWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIG1lbnV0b2dnbGVFbC5jbGFzc0xpc3QucmVtb3ZlKFwidG9nZ2xlYWN0aXZlXCIpO1xyXG4gICAgfVxyXG59XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGRpc3BsYXltZW51LCBmYWxzZSk7Il19
